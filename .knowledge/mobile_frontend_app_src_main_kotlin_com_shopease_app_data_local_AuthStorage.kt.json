{"is_source_file": true, "format": "Kotlin", "description": "This Kotlin file defines the AuthStorage class, which manages persistent storage of authentication tokens and user info using Android's DataStore API. It provides methods to retrieve the token as a Flow, set user session details, and clear stored data.", "external_files": ["android.content.Context", "androidx.datastore.preferences.core.edit", "androidx.datastore.preferences.core.stringPreferencesKey", "androidx.datastore.preferences.preferencesDataStore", "kotlinx.coroutines.flow.Flow", "kotlinx.coroutines.flow.map"], "external_methods": ["preferencesDataStore(name: String): Lazy<DataStore<Preferences>>", "edit(transform: suspend (MutablePreferences) -> Unit): suspend", "map(transform: suspend (Preferences) -> T): Flow<T>"], "published": ["com.shopease.app.data.local.AuthStorage"], "classes": [{"name": "AuthStorage", "description": "A class that manages persistent storage of authentication tokens and user info using DataStore. It provides methods to access the token, set session details, and clear stored data."}], "methods": [{"name": "token", "description": "Returns a Flow emitting the current auth token as a nullable String."}, {"name": "setSession", "description": "Suspends execution to store user name, email, and optionally a token into DataStore."}, {"name": "clear", "description": "Suspends execution to clear all data stored in DataStore."}], "calls": ["context.dataStore.data.map", "context.dataStore.edit", "it[KEY_NAME]", "it[KEY_EMAIL]", "it[KEY_TOKEN]", "it.clear"], "search-terms": ["AuthStorage", "DataStore preferences", "persistent auth token Kotlin", "Android DataStore token handling", "preferencesDataStore Kotlin"], "state": 2, "file_id": 14, "knowledge_revision": 37, "git_revision": "", "hash": "ea0d1e915e5bf99460f50d90e583b57f", "format-version": 4, "code-base-name": "mobile_frontend", "filename": "mobile_frontend/app/src/main/kotlin/com/shopease/app/data/local/AuthStorage.kt", "revision_history": [{"37": ""}]}